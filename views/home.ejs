<%- include('partials/head') %>
<body style="background-color: #f7f7f7;">
<div class="home-page">
    <div class="home-container">
        <!-- Carousel Section -->
        <div class="home-carousel">
            <div class="home-carousel-content" id="carouselContent">
                <div class="slide">
                    <h3>Collaborate with Ease</h3>
                    <p>Manage budgets and savings pots for any event or goal.</p>
                </div>
                <div class="slide">
                    <h3>Track Spending</h3>
                    <p>Visualize spending with intuitive charts and analytics.</p>
                </div>
                <div class="slide">
                    <h3>Achieve Savings Goals</h3>
                    <p>Set goals and see your progress in real-time.</p>
                </div>
            </div>
            <div class="home-carousel-dots" id="carouselDots">
                <span class="dot active" onclick="showSlide(0)"></span>
                <span class="dot" onclick="showSlide(1)"></span>
                <span class="dot" onclick="showSlide(2)"></span>
            </div>
        </div>

        <!-- Login Section -->
        <div class="login-section">
            <div class="nav-logo">
                <h2>Pocket Money</h2>
            </div>
            <div class="forms-container">
                <div class="login" id="loginContent">
                    <h2>LOGIN</h2>
                    <form id="loginForm">
                        <input type="email" id="login-email" placeholder="Email" required>
                        <div class="password-wrapper">
                            <input type="password" id="login-password" placeholder="Password" required>
                            <i class="fa fa-eye toggle-password" id="toggle-password" onclick="togglePassword()"></i>
                        </div>
                        <button type="submit">Log In</button>
                    </form>
                    <div class="link-group">
                        <div>
                            <p>No account?</p> <a href="#" onclick="toggleForms()">Sign Up!</a>
                        </div>
                        <a href="#">Forgot Password?</a>
                    </div>
                </div>

                <div class="login" id="registerContent">
                    <h2>REGISTER</h2>
                    <form id="registerForm">
                        <div class="input-row" style="margin-bottom: 0;">
                            <input type="text" id="register-first-name" placeholder="First Name" required>
                            <input type="text" id="register-last-name" placeholder="Last Name" required>
                        </div>
                        <input type="email" id="register-email" placeholder="Email" required>
                        <input type="password" id="register-password" placeholder="Password" required>
                        <input type="password" id="register-repeat-password" placeholder="Repeat Password" required>
                        <div class="error" id="error-message"></div>
                        <button type="submit">Sign Up</button>
                    </form>
                    <div class="link-group">
                        <div>
                            <p>Already have an account?</p>
                            <a href="#" onclick="toggleForms()">Log In</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>

    let currentSlide = 0;

    function showSlide(slideIndex) {
        const slides = document.querySelectorAll('.slide');
        const dots = document.querySelectorAll('.dot');
        if (slideIndex >= slides.length) slideIndex = 0;
        if (slideIndex < 0) slideIndex = slides.length - 1;
        currentSlide = slideIndex;

        document.getElementById('carouselContent').style.transform = `translateX(-${slideIndex * 100}%)`;

        dots.forEach((dot, index) => {
            dot.classList.toggle('active', index === slideIndex);
        });
    }

    // Auto-slide every 5 seconds
    setInterval(() => {
        showSlide((currentSlide + 1) % 3);
    }, 5000);

    const regiseterForm = document.getElementById('registerForm');
    const loginPasswordInput = document.getElementById('login-password');
    const togglePassword = document.getElementById('toggle-password');
    const registerPasswordInput = document.getElementById('register-password');
    const repeatPasswordInput = document.getElementById('register-repeat-password');

    togglePassword.addEventListener('click', function () {
        // Toggle the input type between password and text
        const type = loginPasswordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        loginPasswordInput.setAttribute('type', type);
        
        // Toggle the eye icon
        this.classList.toggle('fa-eye');
        this.classList.toggle('fa-eye-slash');
    });

    function toggleForms() {
        const formContainer = document.querySelector('.forms-container');
        formContainer.classList.toggle('show-register'); // Slide the container

        // Show/hide the appropriate form
        document.getElementById('loginContent').style.display = 
            formContainer.classList.contains('show-register') ? 'none' : 'block';
        document.getElementById('registerContent').style.display = 
            formContainer.classList.contains('show-register') ? 'block' : 'none';
    }

    regiseterForm.addEventListener('submit', async function(event) {
        event.preventDefault();
        const errorMessage = document.getElementById('error-message');
        errorMessage.textContent = '';
        if (registerPasswordInput.value !== repeatPasswordInput.value) {
            errorMessage.textContent = 'Passwords do not match!';
        }

        const firstName = document.getElementById('register-first-name').value;
        const lastName = document.getElementById('register-last-name').value;
        const email = document.getElementById('register-email').value;
        const password = document.getElementById('register-password').value;

        console.log('New user: ', firstName, lastName, email);
        return;

    });

</script>

</body>